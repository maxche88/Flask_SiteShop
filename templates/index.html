<!-- Главная страница -->
{% extends 'base.html' %}

{% block link %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/base.css') }}">
{% endblock %}

{% block title %}
Главная страница
{% endblock %}

{% block header %}
<div class="menu">
    {% if role == 'admin' %}
    <!-- Контейнер иконки администратора -->
    <div id="account-icon-container" class="head_user_icons role-admin">
        <svg class="account" id="account-button" width="40" height="40" viewBox="0 0 4000 4000" aria-haspopup="true"
            aria-expanded="false" tabindex="0">
            <path fill="currentColor" stroke="currentColor" stroke-width="50" fill-rule="evenodd"
                d="M798.109 3192.949c-0.068-0.068-0.125-0.125-0.193-0.193-294.716-302.469-476.27-715.757-476.27-1171.437 0-927.153 751.613-1678.766 1678.766-1678.766 927.152 0 1678.765 751.613 1678.765 1678.766 0 456.794-182.452 870.981-478.452 1173.665-0.08-0.034-0.159-0.068-0.239-0.114-172.232-91.129-274.559-132.487-475.905-205.791-216.342-78.772-326.104-101.804-326.104-355.605 0-96.597 226.948-412.867 286.473-517.65 100.429-117.618 97.405-204.916 37.186-281.505l10.039-311.427c88.037-551.005-255.21-872.254-694.93-858.885l-39.767 0-39.766 0c-439.72-13.369-782.967 307.88-694.93 858.885l10.038 311.427c-60.218 76.589-63.242 163.887 37.187 281.505 59.525 104.783 286.473 421.053 286.473 517.65 0 253.801-109.762 276.833-326.104 355.605-199.925 72.792-302.23 114.082-472.267 203.87zm1202.303-3016.909c1019.123 0 1845.278 826.155 1845.278 1845.279 0 1019.123-826.155 1845.278-1845.278 1845.278-1019.124 0-1845.279-826.155-1845.279-1845.278 0-1019.124 826.155-1845.279 1845.279-1845.279z" />
        </svg>
    </div>

    <!-- Выпадающее меню администратора -->
    <div class="dropdown-menu" id="account-menu">
        <a href="{{ url_for('panel_a.admin_acaunt') }}">Личный кабинет</a>
        <a href="{{ url_for('panel_a.admin_panel') }}">Admin panel</a>
        <a href="{{ url_for('panel.suser_panel_edit') }}">Управление товарами</a>
        <a href="{{ url_for('session.logout') }}">Выйти</a>
    </div>

    {% elif role == 'suser' %}
    <!-- Контейнер иконки продавца -->
    <div id="account-icon-container" class="head_user_icons role-suser">
        <svg class="account" id="account-button" width="40" height="40" viewBox="0 0 4000 4000" aria-haspopup="true"
            aria-expanded="false" tabindex="0">
            <path fill="currentColor" stroke="currentColor" stroke-width="50" fill-rule="evenodd"
                d="M798.109 3192.949c-0.068-0.068-0.125-0.125-0.193-0.193-294.716-302.469-476.27-715.757-476.27-1171.437 0-927.153 751.613-1678.766 1678.766-1678.766 927.152 0 1678.765 751.613 1678.765 1678.766 0 456.794-182.452 870.981-478.452 1173.665-0.08-0.034-0.159-0.068-0.239-0.114-172.232-91.129-274.559-132.487-475.905-205.791-216.342-78.772-326.104-101.804-326.104-355.605 0-96.597 226.948-412.867 286.473-517.65 100.429-117.618 97.405-204.916 37.186-281.505l10.039-311.427c88.037-551.005-255.21-872.254-694.93-858.885l-39.767 0-39.766 0c-439.72-13.369-782.967 307.88-694.93 858.885l10.038 311.427c-60.218 76.589-63.242 163.887 37.187 281.505 59.525 104.783 286.473 421.053 286.473 517.65 0 253.801-109.762 276.833-326.104 355.605-199.925 72.792-302.23 114.082-472.267 203.87zm1202.303-3016.909c1019.123 0 1845.278 826.155 1845.278 1845.279 0 1019.123-826.155 1845.278-1845.278 1845.278-1019.124 0-1845.279-826.155-1845.279-1845.278 0-1019.124 826.155-1845.279 1845.279-1845.279z" />
        </svg>
    </div>

    <!-- Выпадающее меню продавца -->
    <div class="dropdown-menu" id="account-menu">
        <a href="{{ url_for('panel.suser_panel_acaunt') }}">Личный кабинет</a>
        <a href="{{ url_for('panel.suser_panel_edit') }}">Управление товарами</a>
        <a href="{{ url_for('session.logout') }}">Выйти</a>
    </div>

    {% elif role == 'user' %}
    <!-- Контейнер иконки покупателя -->
    <div id="account-icon-container" class="head_user_icons role-user">
        <svg class="shopping-cart_login" id="shopping-cart" width="40" height="40" viewBox="0 0 4000 4000"
            aria-haspopup="true" aria-expanded="false" tabindex="0">
            <g fill="none" stroke="currentColor" stroke-width="200" stroke-linecap="round" stroke-linejoin="round">
                <line x1="1580.011" y1="1398.067" x2="1580.011" y2="869.891" />
                <path d="M1580.011 869.891c6.156,-139.943 183.948,-301.062 398.749,-308.968" />
                <line x1="2377.51" y1="1398.067" x2="2377.51" y2="869.891" />
                <path d="M2377.51 869.891c-6.157,-139.943 -183.948,-301.062 -398.75,-308.968" />
                <polygon points="2834.421,1139.285 2961.189,3061.815 1006.943,3061.815 1123.147,1139.285" />
                <circle cx="1978.808" cy="2005.486" r="1875.004" />
            </g>
        </svg>

        <span class="cart-badge" id="cart-count-badge"></span>
        
        <svg class="account" id="account-button" width="40" height="40" viewBox="0 0 4000 4000" aria-hidden="true">
            <path fill="currentColor" stroke="currentColor" stroke-width="50" fill-rule="evenodd"
                d="M798.109 3192.949c-0.068-0.068-0.125-0.125-0.193-0.193-294.716-302.469-476.27-715.757-476.27-1171.437 0-927.153 751.613-1678.766 1678.766-1678.766 927.152 0 1678.765 751.613 1678.765 1678.766 0 456.794-182.452 870.981-478.452 1173.665-0.08-0.034-0.159-0.068-0.239-0.114-172.232-91.129-274.559-132.487-475.905-205.791-216.342-78.772-326.104-101.804-326.104-355.605 0-96.597 226.948-412.867 286.473-517.65 100.429-117.618 97.405-204.916 37.186-281.505l10.039-311.427c88.037-551.005-255.21-872.254-694.93-858.885l-39.767 0-39.766 0c-439.72-13.369-782.967 307.88-694.93 858.885l10.038 311.427c-60.218 76.589-63.242 163.887 37.187 281.505 59.525 104.783 286.473 421.053 286.473 517.65 0 253.801-109.762 276.833-326.104 355.605-199.925 72.792-302.23 114.082-472.267 203.87zm1202.303-3016.909c1019.123 0 1845.278 826.155 1845.278 1845.279 0 1019.123-826.155 1845.278-1845.278 1845.278-1019.124 0-1845.279-826.155-1845.279-1845.278 0-1019.124 826.155-1845.279 1845.279-1845.279z" />
        </svg>
    </div>

    <!-- Выпадающее меню покупателя -->
    <div class="dropdown-menu" id="account-menu">
        <a href="{{ url_for('user.user_acaunt') }}">Личный кабинет</a>
        <a href="{{ url_for('session.logout') }}">Выйти</a>
    </div>

    {% else %}
    <!-- Контейнер иконки гостя -->
    <div id="account-icon-container" class="head_user_icons role-guest">
        <svg class="account" id="account-button" width="40" height="40" viewBox="0 0 4000 4000" aria-haspopup="true"
            aria-expanded="false" tabindex="0">
            <path fill="currentColor" stroke="currentColor" stroke-width="50" fill-rule="evenodd"
                d="M798.109 3192.949c-0.068-0.068-0.125-0.125-0.193-0.193-294.716-302.469-476.27-715.757-476.27-1171.437 0-927.153 751.613-1678.766 1678.766-1678.766 927.152 0 1678.765 751.613 1678.765 1678.766 0 456.794-182.452 870.981-478.452 1173.665-0.08-0.034-0.159-0.068-0.239-0.114-172.232-91.129-274.559-132.487-475.905-205.791-216.342-78.772-326.104-101.804-326.104-355.605 0-96.597 226.948-412.867 286.473-517.65 100.429-117.618 97.405-204.916 37.186-281.505l10.039-311.427c88.037-551.005-255.21-872.254-694.93-858.885l-39.767 0-39.766 0c-439.72-13.369-782.967 307.88-694.93 858.885l10.038 311.427c-60.218 76.589-63.242 163.887 37.187 281.505 59.525 104.783 286.473 421.053 286.473 517.65 0 253.801-109.762 276.833-326.104 355.605-199.925 72.792-302.23 114.082-472.267 203.87zm1202.303-3016.909c1019.123 0 1845.278 826.155 1845.278 1845.279 0 1019.123-826.155 1845.278-1845.278 1845.278-1019.124 0-1845.279-826.155-1845.279-1845.278 0-1019.124 826.155-1845.279 1845.279-1845.279z" />
        </svg>
    </div>

    <!-- Выпадающее меню гостя -->
    <div class="dropdown-menu" id="account-menu">
        <a href="{{ url_for('session.login') }}">Войти</a>
        <a href="{{ url_for('session.register') }}">Регистрация</a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block content %}
<div class="user_greeting">
    <h4>Добро пожаловать, {{ username }}!</h4>
</div>

<!-- Основной блок поиска -->
<div class="container_info_search">
    <div class="search_top">
        <div class="search_input_group">
            <input type="text" id="search-input" placeholder="Что ищете?" />
            <button class="search_btn" id="search-btn">Поиск</button>
        </div>
        <button class="filter_toggle" id="toggle-filters">
            <img src="{{ url_for('static', filename='img/other/filter.png') }}" alt="filter" class="btn-icon">
        </button>
    </div>

    <!-- Отображение активных фильтров -->
    <div class="active_filters" id="active-filters"></div>

    <!-- Форма расширенных фильтров -->
    <div class="advanced_filters" id="advanced-filters">

        <div class="conteiner_category">
            <p><strong>Категории</strong></p>
            <div class="filter_group">
                <label><input type="checkbox" name="category" value="Мотоциклы"> Мотоциклы</label>
                <label><input type="checkbox" name="category" value="Квадроциклы"> Квадроциклы</label>
                <label><input type="checkbox" name="category" value="Снегоходы"> Снегоходы</label>
                <label><input type="checkbox" name="category" value="Мотоблоки"> Мотоблоки</label>
                <label><input type="checkbox" name="category" value="Бензо-инструмент"> Бензо-инструмент</label>
                <label><input type="checkbox" name="category" value="Запчасти"> Запчасти</label>
            </div>
        </div>
        
        <div class="conteiner_price">
            <p><strong>Цена</strong></p>
            <div class="block_info_price">
                <p>от:</p>
                <p>до:</p>
            </div>
            <div class="block_field_price">
                <input type="number" id="price_min" placeholder="Руб." />
                <input type="number" id="price_max" placeholder="Руб." />
            </div>
        </div>
        

        <div class="filter_group check_box_sale">
            <label><input type="checkbox" id="sale_checkbox"> Только акции</label>
        </div>
        <button class="clear_filters clear_btn" id="clear-filters">Сбросить фильтры</button>
    </div>
</div>

<div class="products-section">
    <div id="product-container" class="product-grid"></div>
    <div id="loading" style="display: none; text-align: center;">Загрузка...</div>
</div>


<!-- Шаблон карточек товаров -->
<template id="product-card-template">
    <div class="product-card">
        <div class="img_container">
            <img class="img_cont" alt="">
            <div class="badge">Акция</div>
        </div>

        <div class="info_product">
            <div class="article_num">
                <p>Артикул: <span class="article-value"></span></p>
            </div>
            <div class="content_title">
                <div class="title_product">
                    <a href="#" class="product-title-link"></a>
                </div>
                <div class="description">
                    <p class="description-value"></p>
                </div>
            </div>

            <div class="block_buy">
                
                <div class="price_product">
                    <div class="background_gradient">
                        <p class="price-value"></p>
                    </div>
                </div>

                <div class="user-actions" style="display: none;">
                    <a href="#" class="cart-icon" title="Добавить в корзину">
                        <img class="img_c" src="{{ url_for('static', filename='img/other/cart-add-mini.svg') }}"
                            alt="В корзину" width="25" height="25">
                    </a>
                    <div class="btn_buy" data-product-id="">
                        <div class="btn_text">
                            Купить
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</template>
{% endblock %}

{% block js %}
<script>
    window.userRole = "{{ role }}";
</script>
<script src="{{ url_for('static', filename='js/main_menu.js') }}"></script>
<script src="{{ url_for('static', filename='js/cart-ui.js') }}"></script>
<script src="{{ url_for('static', filename='js/filters_category.js') }}"></script>
<script src="{{ url_for('static', filename='js/menu_category.js') }}"></script>
{% endblock %}